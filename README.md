# DeltaMut Protein Structure Database Acess and Download
This repository contains scripts and instructions to generate and retrieve AlphaFold2-modeled protein structures featured in the DeltaMut database. It also provides utilities and detailed steps to batch-download all dataset files from the ARP Research Data Repository.

# DeltaMut Overview
The DeltaMut database contains high-quality protein structures generated with ParaFold, an HPC-friendly implementation of AlphaFold2. The collection consists of both wild-type and variant protein structures from a curated set of missense variants retrieved from Humsavar.

---
üì¶ Repository Contents

This repository provides scripts for:

1. Structure Prediction: Modeling of wild-type and variant protein structures using ParaFold.

2. Data Retrieval:
  - Download protein-specific dataset or all the datasets by specifying protein acessions or using pattern matching.
  - Retrieve a tab-delimited file listing all dataset identifiers, protein codes, and their corresponding private URLs.
  - Download datasets directly from the provided private URLs.

---
üñ•Ô∏è Protein Structure Generation Pipeline

Protein structures were generated on an HPC cluster using ParaFold in two steps:

1. Multiple Sequence Alignment (MSA) and Feature Generation (CPU-only stage):
```bash
DeltaMut_Database/HPC_Pipeline/parafold_cpu_komondor.sh
```
2. Model Generation and Relaxation (GPU stage):
```bash
DeltaMut_Database/HPC_Pipeline/parafold_gpu_komondor.sh
```

> **Technical Information:** For the technical details on how to install ParaFold please refer to the following GitHub repository: https://github.com/Zuricho/ParallelFold and for information on how ParaFold is implemented, see the refereced research paper: ParaFold doi.org/10.1145/3503470.3503471*

---
üìÇ ARP Repository Structure Description

All data present in the DeltaMut database and intermediate AlphaFold2 output files are stored in the **DeltaMut-Database** directory in the ARP Research Data Repository, which is maintained by the HUN-REN network for long-term accessibility and preservation. ARP utilizes *Dataverses*, structured digital containers that organize datasets and metadata in a user-friendly and searchable way, allowing independent access to individual files without the need to navigate through multiple datasets. *Please see the following guide to familiarize yourself with Dataverses: https://dataverse.org/*.

The DeltaMut_Database directory is organized as follows:
- 12,342 dataverses - Each dataverse corresponds to one protein and includes all its related missense variants.
  
- 77,819 datasets - Each dataset contains:
  - ParaFold-generated protein structures in PDB format for both wild-type and missense variants.
  - Intermediate output files generated by AlphaFold2.
  - Detailed descriptions explaining the contents of each file.
    
- 1,507,487 individual files - Every file is independently accessible and searchable, facilitating direct retrieval without browsing multiple datasets.

---
üì• Downloading Data from the ARP Repository

Files can be downloaded using the following commands:

1. Download a specific protein using the UniProt accession ID and pattern matching
```bash
bash DeltaMut_Database/ARP_Download_Files/download.sh -g 'B3EW[A-Z]*'
```
2. Download all 77,819 datasets
```bash
bash DeltaMut_Database/ARP_Download_Files/download.sh
```
---
## Accessing Data via Private URLs (Repository in Private Mode)

> **Technical Note:** Applicable only during the DeltaMut Database submission and review process.

While the DeltaMut repository is in private mode, the data can be accessed through private URLs listed in the file:
```text
DeltaMut_Database/ARP_Download_Files/private_urls.tsv
```
Use the following one-liner commands to retrieve data from these URLs:

> **Important:** Accessing these URLs while the DeltaMut dataverse is in private mode requires an authorized *API_TOKEN*, which must be requested from the dataset maintainers prior to dataverse publication.

```bash
# Download ten random datasets
cat private_urls.tsv | cut -f3 | shuf | head | xargs bash DeltaMut_Database/ARP_Download_Files/download_private.sh

# Download all the datasets using private URLs:
cat private_urls.tsv | xargs bash DeltaMut_Database/ARP_Download_Files/download_private.sh
```

> **‚ö†Ô∏è Caution:** The full dataset size exceed 60 TB. Please ensure you have sufficient storage capacity and bandwidth before downloading. For large-scale download plans and any questions, contact Erda Qorri at erda.qorri@brc.hu
